\input{trains.tex}

\solution

Данная задача решалась весьма легко, главное было подойти к ней с правильной стороны.

А именно, определим для каждой станции количество вагонов, которые надо иметь на этой станции в 
полночь (точнее, за мгновение до полуночи). Для этого отсортируем все поезда, приходящие на эту 
станцию и отправляющиеся с нее, по времени; при равных временах будем прибывающие поезда учитывать 
до отправляющихся. После этого пробежимся по отсортированному массиву и будем вычислять для каждого 
момента времени следующую величину: суммарный <<баланс>> вагонов, т.е. общее количество прибывших вагонов 
минус общее количество убывших вагонов. Очевидно, что если в какой-то момент этот баланс становится 
отрицательным, то искомое количество вагонов, которые нужны на станции до полуночи, равно 
максимальному модулю среди отрицаительных балансов. Если же балансы все время остаются 
положительными, то это количество равно нулю.

После того, как мы для каждой станции определили нужное количество вагонов, их остается 
просуммировать и добавить те вагоны, которые в полночь находятся в пути. Полученное значение и 
будет ответом.

Отметим, что, т.к. минут в сутках всего 1440, то вагоны можно сортировать подсчетом, т.е. просто 
для каждого момента времени вычислять, сколько в этот момент прибывает вагонов на станцию, и 
сколько убывает. Именно такой вариант и реализован в примере решения.

\input{code.tex}  