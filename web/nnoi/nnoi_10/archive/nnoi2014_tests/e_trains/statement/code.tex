\vspace{0pt}
\begin{codesample}[\code]
\verb같\codetok{const}\verb max{\ttfamily\symbol{`\_}}\verb컏ime=24*60-1;\codelf
\verb같\codetok{type}\verb ttrain=\codetok{record}\verb s,f,t1,t2,n:integer; \codetok{end}\verb;\codelf
\verb     ttrainArr=\codetok{array}\verb \codetok{of}\verb ttrain;\codelf
\verb같\codetok{var}\verb f:text;\codelf
\verb    n,m:integer;\codelf
\verb    train:\codetok{array}\verb[1..100000] \codetok{of}\verb ttrain;\codelf
\verb    arrives, departs:\codetok{array}\verb [0..max{\ttfamily\symbol{`\_}}\verb컏ime] \codetok{of}\verb \codelf
\verb                                  ttrainArr;\codelf
\verb    min,bal:\codetok{array}\verb[1..100000] \codetok{of}\verb int64;\codelf
\verb    ans:int64;\codelf
\verb    i,j:integer;\codelf
\verb    curs:integer;\codelf
\verb    \codelf
\verb같\codetok{function}\verb readnum:integer;\codelf
\verb같\codetok{var}\verb ch:char;\codelf
\verb같\codetok{begin}\verb같\codelf
\verb같\codetok{repeat}\verb같\codelf
\verb  read(f,ch);\codelf
\verb같\codetok{until}\verb ch \codetok{in}\verb ['0'..'9'];\codelf
\verb같\codetok{result}\verb:=0;\codelf
\verb같\codetok{while}\verb ch \codetok{in}\verb ['0'..'9'] \codetok{do}\verb \codetok{begin}\verb같\codelf
\verb      \codetok{result}\verb:=\codetok{result}\verb*10+ord(ch)-ord('0');\codelf
\verb      read(f,ch);\codelf
\verb같\codetok{end}\verb;\codelf
\verb같\codetok{end}\verb;\codelf
\verb    \codelf
\verb같\codetok{function}\verb readmom:integer;\codelf
\verb같\codetok{begin}\verb같\codelf
\verb같\codetok{result}\verb:=readnum*60+readnum;\codelf
\verb같\codetok{end}\verb;\codelf
\verb같\codelf
\verb같\codetok{procedure}\verb push(\codetok{var}\verb a:ttrainArr;\codetok{const}\verb t:ttrain);\codelf
\verb같\codetok{begin}\verb같\codelf
\verb컎etlength(a, length(a)+1);\codelf
\verb캻[length(a)-1]:=t;\codelf
\verb같\codetok{end}\verb;\codelf
\verb같\codelf
\verb같\codetok{begin}\verb같\codelf
\verb캻ssign(f,'trains.in');reset(f);\codelf
\verb컍ead(f,n,m);\codelf
\verb캻ns:=0;\codelf
\verb같\codetok{for}\verb i:=1 \codetok{to}\verb m \codetok{do}\verb \codetok{begin}\verb같\codelf
\verb    read(f,train[i].s,train[i].f,train[i].n);\codelf
\verb    train[i].t1:=readmom;\codelf
\verb    train[i].t2:=readmom;\codelf
\verb    \codetok{if}\verb train[i].t2<train[i].t1 \codetok{then}\verb \codelf
\verb       ans:=ans+train[i].n;\codelf
\verb    push(arrives[train[i].t2], train[i]);\codelf
\verb    push(departs[train[i].t1], train[i]);\codelf
\verb같\codetok{end}\verb;\codelf
\verb캽lose(f);\codelf
\verb컀illchar(bal,sizeof(bal),0);\codelf
\verb컀illchar(min,sizeof(min),0);\codelf
\verb같\codetok{for}\verb i:=0 \codetok{to}\verb max{\ttfamily\symbol{`\_}}\verb컏ime \codetok{do}\verb \codetok{begin}\verb같\codelf
\verb    \codetok{for}\verb j:=0 \codetok{to}\verb length(arrives[i])-1 \codetok{do}\verb같\codelf
\verb        inc(bal[arrives[i][j].f], \codelf
\verb            arrives[i][j].n);\codelf
\verb    \codetok{for}\verb j:=0 \codetok{to}\verb length(departs[i])-1 \codetok{do}\verb \codetok{begin}\verb같\codelf
\verb        curs:=departs[i][j].s;\codelf
\verb        dec(bal[curs], departs[i][j].n);\codelf
\verb        \codetok{if}\verb bal[curs]<min[curs] \codetok{then}\verb \codelf
\verb           min[curs]:=bal[curs];\codelf
\verb    \codetok{end}\verb;\codelf
\verb같\codetok{end}\verb;\codelf
\verb같\codetok{for}\verb i:=1 \codetok{to}\verb n \codetok{do}\verb \codetok{begin}\verb같\codelf
\verb    \codetok{if}\verb min[i]<0 \codetok{then}\verb같\codelf
\verb       inc(ans, -min[i]);\codelf
\verb같\codetok{end}\verb;\codelf
\verb캻ssign(f,'trains.out');rewrite(f);\codelf
\verb컒riteln(f,ans);\codelf
\verb캽lose(f);\codelf
\verb같\codetok{end}\verb.
\end{codesample}%
